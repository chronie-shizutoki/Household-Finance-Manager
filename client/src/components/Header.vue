<template>
  <div :class="['header', currentTheme]">
    <h1>{{ title }}</h1>

    <ElDropdown trigger="click">
      <span class="earth-icon" role="button" aria-haspopup="true" aria-expanded="false" aria-label="åˆ‡æ¢è¯­è¨€">ğŸŒ</span>
      
      <template #dropdown>
        <ElDropdownMenu>
          <ElDropdownItem 
            v-for="lang in languages" 
            :key="lang.code" 
            @click="switchLanguage(lang.code)"
          >
            {{ lang.label }}
          </ElDropdownItem>
        </ElDropdownMenu>
      </template>
    </ElDropdown>
  </div>
</template>

<script setup>
// æ¢å¤å¯¼å…¥ä½ åŸæœ‰çš„ useLanguageSwitch composable
import { useLanguageSwitch } from '@/composables/useLanguageSwitch';
import { computed } from 'vue';
import { useThemeStore } from '@/stores/theme'; // å¯¼å…¥ä¸»é¢˜å­˜å‚¨
// å¯¼å…¥ Element Plus çš„ä¸‹æ‹‰èœå•ç›¸å…³ç»„ä»¶
import { ElDropdown, ElDropdownMenu, ElDropdownItem } from 'element-plus';

// å®šä¹‰ç»„ä»¶æ¥æ”¶çš„ props
const props = defineProps({ 
  title: String // æ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ ‡é¢˜
});

// è°ƒç”¨ useLanguageSwitch è·å–è¯­è¨€åˆ‡æ¢å‡½æ•°
const { switchLanguage } = useLanguageSwitch();
const themeStore = useThemeStore();
const currentTheme = computed(() => themeStore.currentTheme); // å“åº”å¼è·å–å½“å‰ä¸»é¢˜

// å®šä¹‰æ”¯æŒçš„è¯­è¨€åˆ—è¡¨
const languages = [
  { code: 'en-US', label: 'English (United States)' },
  { code: 'zh-CN', label: 'ç®€ä½“ä¸­æ–‡ (ä¸­å›½å¤§é™†)' },
  { code: 'ja-JP', label: 'æ—¥æœ¬èª (æ—¥æœ¬)' },
  { code: 'kanji-JP', label: 'å½ä¸­å›½èª (æ—¥æœ¬)' },
  { code: 'fr-FR', label: 'FranÃ§ais (France)' },
  { code: 'zh-HK', label: 'ç¹é«”ä¸­æ–‡ (é¦™æ¸¯ç‰¹åˆ¥è¡Œæ”¿å€)' },
  { code: 'zh-TW', label: 'ç¹é«”ä¸­æ–‡ (å°ç£åœ°å€)' },
  { code: 'zh-SG', label: 'ç®€ä½“ä¸­æ–‡ (æ–°åŠ å¡)' },
  { code: 'zh-Classical', label: 'æ–‡è¨€ (ä¸­åœ‹)' },
  { code: 'es-ES', label: 'EspaÃ±ol (EspaÃ±a)' },
  { code: 'ko-KR', label: 'í•œêµ­ì–´ (ëŒ€í•œë¯¼êµ­)' },
  { code: 'kanji-KR', label: 'éŸ“åœ‹èª (å¤§éŸ“æ°‘åœ‹)' },
  { code: 'ms-MY', label: 'Bahasa Melayu (Malaysia)' },
  { code: 'vi-VN', label: 'Tiáº¿ng Viá»‡t (Viá»‡t Nam)' },
];
</script>

<style scoped>
@import '../styles/header.css';
</style>

